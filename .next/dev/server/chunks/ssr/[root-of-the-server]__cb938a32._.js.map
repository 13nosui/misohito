{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/sugawara/Service/MISOHITO/misohito/src/hooks/useTankaEditor.ts"],"sourcesContent":["import { useState, useRef, ChangeEvent } from 'react';\nimport { TankaSections } from '@/types/post';\n\nconst LIMITS: Record<keyof TankaSections, number> = {\n    kami1: 5,\n    kami2: 7,\n    kami3: 5,\n    shimo1: 7,\n    shimo2: 7,\n};\n\nexport const useTankaEditor = () => {\n    const [sections, setSections] = useState<TankaSections>({\n        kami1: '', kami2: '', kami3: '', shimo1: '', shimo2: ''\n    });\n\n    // 【修正点】useRef は必ずトップレベルで個別に呼び出す\n    const kami1Ref = useRef<HTMLInputElement>(null);\n    const kami2Ref = useRef<HTMLInputElement>(null);\n    const kami3Ref = useRef<HTMLInputElement>(null);\n    const shimo1Ref = useRef<HTMLInputElement>(null);\n    const shimo2Ref = useRef<HTMLInputElement>(null);\n\n    // 参照用にまとめる\n    const inputRefs = {\n        kami1: kami1Ref,\n        kami2: kami2Ref,\n        kami3: kami3Ref,\n        shimo1: shimo1Ref,\n        shimo2: shimo2Ref,\n    };\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement>, key: keyof TankaSections) => {\n        const value = e.target.value;\n        const limit = LIMITS[key];\n\n        // 文字数制限内であれば更新\n        if (value.length <= limit) {\n            setSections(prev => ({ ...prev, [key]: value }));\n        }\n\n        // ぴったり埋まったら次のフィールドへ自動フォーカス\n        if (value.length === limit) {\n            const keys = Object.keys(LIMITS) as (keyof TankaSections)[];\n            const currentIndex = keys.indexOf(key);\n            const nextKey = keys[currentIndex + 1];\n\n            if (nextKey) {\n                inputRefs[nextKey].current?.focus();\n            }\n        }\n    };\n\n    return { sections, inputRefs, handleChange, LIMITS };\n};"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM,SAA8C;IAChD,OAAO;IACP,OAAO;IACP,OAAO;IACP,QAAQ;IACR,QAAQ;AACZ;AAEO,MAAM,iBAAiB;IAC1B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;QACpD,OAAO;QAAI,OAAO;QAAI,OAAO;QAAI,QAAQ;QAAI,QAAQ;IACzD;IAEA,gCAAgC;IAChC,MAAM,WAAW,IAAA,+MAAM,EAAmB;IAC1C,MAAM,WAAW,IAAA,+MAAM,EAAmB;IAC1C,MAAM,WAAW,IAAA,+MAAM,EAAmB;IAC1C,MAAM,YAAY,IAAA,+MAAM,EAAmB;IAC3C,MAAM,YAAY,IAAA,+MAAM,EAAmB;IAE3C,WAAW;IACX,MAAM,YAAY;QACd,OAAO;QACP,OAAO;QACP,OAAO;QACP,QAAQ;QACR,QAAQ;IACZ;IAEA,MAAM,eAAe,CAAC,GAAkC;QACpD,MAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC5B,MAAM,QAAQ,MAAM,CAAC,IAAI;QAEzB,eAAe;QACf,IAAI,MAAM,MAAM,IAAI,OAAO;YACvB,YAAY,CAAA,OAAQ,CAAC;oBAAE,GAAG,IAAI;oBAAE,CAAC,IAAI,EAAE;gBAAM,CAAC;QAClD;QAEA,2BAA2B;QAC3B,IAAI,MAAM,MAAM,KAAK,OAAO;YACxB,MAAM,OAAO,OAAO,IAAI,CAAC;YACzB,MAAM,eAAe,KAAK,OAAO,CAAC;YAClC,MAAM,UAAU,IAAI,CAAC,eAAe,EAAE;YAEtC,IAAI,SAAS;gBACT,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE;YAChC;QACJ;IACJ;IAEA,OAAO;QAAE;QAAU;QAAW;QAAc;IAAO;AACvD"}},
    {"offset": {"line": 76, "column": 0}, "map": {"version":3,"sources":["file:///Users/sugawara/Service/MISOHITO/misohito/src/components/post/PostAnimation.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { TankaSections } from '@/types/post';\n\ninterface PostAnimationProps {\n    sections: TankaSections;\n    onComplete?: () => void; // 追加：完了時のコールバック\n}\n\nexport const PostAnimation = ({ sections, onComplete }: PostAnimationProps) => {\n    const sectionKeys: (keyof TankaSections)[] = ['kami1', 'kami2', 'kami3', 'shimo1', 'shimo2'];\n    let globalCharIndex = 0;\n\n    // アニメーション総時間の計算\n    // (31文字 * 0.05) + (5節 * 0.2) + 余裕を持たせて2秒後くらいに切り替え\n    useEffect(() => {\n        if (onComplete) {\n            const totalDuration = (31 * 50) + (5 * 200) + 2000;\n            const timer = setTimeout(() => {\n                onComplete();\n            }, totalDuration);\n            return () => clearTimeout(timer);\n        }\n    }, [onComplete]);\n\n    return (\n        <div className=\"flex flex-col items-center justify-center min-h-[60vh]\">\n            <div className=\"flex flex-wrap items-center justify-center max-w-2xl gap-y-6\">\n                {sectionKeys.map((key, sIndex) => {\n                    const chars = sections[key].split('');\n\n                    return (\n                        <div key={key} className=\"flex mr-[1.5em] last:mr-0\">\n                            {chars.map((char, cIndex) => {\n                                const delay = globalCharIndex * 0.05 + sIndex * 0.2;\n                                globalCharIndex++;\n\n                                return (\n                                    <motion.span\n                                        key={`${key}-${cIndex}`}\n                                        className=\"text-3xl md:text-4xl font-medium tracking-tight text-slate-900\"\n                                        initial={{ opacity: 0, x: -20, filter: 'blur(10px)' }}\n                                        animate={{ opacity: 1, x: 0, filter: 'blur(0px)' }}\n                                        transition={{\n                                            duration: 0.4,\n                                            delay: delay,\n                                            ease: [0.16, 1, 0.3, 1],\n                                        }}\n                                    >\n                                        {char}\n                                    </motion.span>\n                                );\n                            })}\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAWO,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,UAAU,EAAsB;IACtE,MAAM,cAAuC;QAAC;QAAS;QAAS;QAAS;QAAU;KAAS;IAC5F,IAAI,kBAAkB;IAEtB,gBAAgB;IAChB,kDAAkD;IAClD,IAAA,kNAAS,EAAC;QACN,IAAI,YAAY;YACZ,MAAM,gBAAgB,AAAC,KAAK,KAAO,IAAI,MAAO;YAC9C,MAAM,QAAQ,WAAW;gBACrB;YACJ,GAAG;YACH,OAAO,IAAM,aAAa;QAC9B;IACJ,GAAG;QAAC;KAAW;IAEf,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;YAAI,WAAU;sBACV,YAAY,GAAG,CAAC,CAAC,KAAK;gBACnB,MAAM,QAAQ,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC;gBAElC,qBACI,8OAAC;oBAAc,WAAU;8BACpB,MAAM,GAAG,CAAC,CAAC,MAAM;wBACd,MAAM,QAAQ,kBAAkB,OAAO,SAAS;wBAChD;wBAEA,qBACI,8OAAC,oMAAM,CAAC,IAAI;4BAER,WAAU;4BACV,SAAS;gCAAE,SAAS;gCAAG,GAAG,CAAC;gCAAI,QAAQ;4BAAa;4BACpD,SAAS;gCAAE,SAAS;gCAAG,GAAG;gCAAG,QAAQ;4BAAY;4BACjD,YAAY;gCACR,UAAU;gCACV,OAAO;gCACP,MAAM;oCAAC;oCAAM;oCAAG;oCAAK;iCAAE;4BAC3B;sCAEC;2BAVI,GAAG,IAAI,CAAC,EAAE,QAAQ;;;;;oBAanC;mBApBM;;;;;YAuBlB;;;;;;;;;;;AAIhB"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///Users/sugawara/Service/MISOHITO/misohito/src/components/post/DraggablePost.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport Matter from 'matter-js';\nimport { TankaSections } from '@/types/post';\n\ninterface DraggablePostProps {\n    sections: TankaSections;\n    onDelete: () => void;\n}\n\nexport const DraggablePost = ({ sections, onDelete }: DraggablePostProps) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const cardRef = useRef<HTMLDivElement>(null);\n\n    const engineRef = useRef<Matter.Engine | null>(null);\n    const cardBodyRef = useRef<Matter.Body | null>(null);\n    const dragConstraintRef = useRef<Matter.Constraint | null>(null);\n\n    const [isReady, setIsReady] = useState(false);\n\n    const CARD_WIDTH = 600;\n    const CARD_HEIGHT = 400;\n\n    useEffect(() => {\n        if (!cardRef.current) return;\n\n        const cw = window.innerWidth;\n        const ch = window.innerHeight;\n\n        // 1. Setup Engine\n        const engine = Matter.Engine.create();\n        engine.gravity.y = 0;\n        engine.gravity.x = 0;\n        engineRef.current = engine;\n\n        // 2. Create Card Body\n        const cardBody = Matter.Bodies.rectangle(cw / 2, ch / 2, CARD_WIDTH, CARD_HEIGHT, {\n            frictionAir: 0.03, // 適度な空気抵抗\n            restitution: 0.5,\n            density: 0.002,\n        });\n        cardBodyRef.current = cardBody;\n\n        // ★修正: getInertia ではなく .inertia プロパティを使用\n        // 0.2 程度に設定することで、端を持った時の回転が非常にスムーズになります\n        Matter.Body.setInertia(cardBody, cardBody.inertia * 0.2);\n\n        Matter.World.add(engine.world, cardBody);\n\n        // 3. Game Loop\n        let animationFrameId: number;\n        const update = () => {\n            // 物理演算を1ステップ進める\n            Matter.Engine.update(engine, 1000 / 60);\n\n            if (cardBody && cardRef.current) {\n                const { x, y } = cardBody.position;\n                const angle = cardBody.angle;\n\n                // ドラッグ中かどうかで減衰を変える\n                const isDragging = dragConstraintRef.current !== null;\n                const angularDamping = isDragging ? 0.92 : 0.995;\n                Matter.Body.setAngularVelocity(cardBody, cardBody.angularVelocity * angularDamping);\n\n                // DOMへ描画\n                cardRef.current.style.transform = `translate(${x - CARD_WIDTH / 2}px, ${y - CARD_HEIGHT / 2}px) rotate(${angle}rad)`;\n\n                // 影の計算\n                const speed = cardBody.speed;\n                const shadowBlur = Math.min(speed * 2 + 10, 50);\n                const shadowOpacity = Math.min(speed * 0.01 + 0.1, 0.25);\n                const shadowOffset = Math.min(speed + 5, 20);\n                const dx = x - cw / 2;\n                const dy = y - ch / 2;\n                const dist = Math.sqrt(dx * dx + dy * dy) || 1;\n                cardRef.current.style.boxShadow = `${(dx / dist) * -shadowOffset}px ${(dy / dist) * -shadowOffset + shadowOffset}px ${shadowBlur}px rgba(0,0,0,${shadowOpacity})`;\n\n                // 画面外判定\n                const margin = 400;\n                if (x < -margin || x > cw + margin || y < -margin || y > ch + margin) {\n                    onDelete();\n                }\n            }\n            animationFrameId = requestAnimationFrame(update);\n        };\n\n        update();\n        setIsReady(true);\n\n        return () => {\n            cancelAnimationFrame(animationFrameId);\n            Matter.Engine.clear(engine);\n        };\n    }, [onDelete]);\n\n    const handlePointerDown = useCallback((e: React.PointerEvent) => {\n        if (!cardBodyRef.current || !engineRef.current) return;\n\n        const clientX = e.clientX;\n        const clientY = e.clientY;\n        const body = cardBodyRef.current;\n\n        // 掴んだ瞬間の速度を少し殺して安定させる\n        Matter.Body.setVelocity(body, { x: body.velocity.x * 0.5, y: body.velocity.y * 0.5 });\n\n        // ★重要: 起点ズレを防ぐためのローカル座標計算\n        const bodyPos = body.position;\n        const offsetVector = { x: clientX - bodyPos.x, y: clientY - bodyPos.y };\n        const localPoint = Matter.Vector.rotate(offsetVector, -body.angle);\n\n        // ★修正: stiffness を 0.1 程度に下げ、「粘り」を持たせることで intentionallies 風の重みを出す\n        // 1.0 だと遊びがなく、物理演算がカクつく原因になります\n        const constraint = Matter.Constraint.create({\n            pointA: { x: clientX, y: clientY },\n            bodyB: body,\n            pointB: localPoint,\n            stiffness: 0.15, // ゴムのような粘り気のある追従\n            damping: 0.05,\n            length: 0,\n            render: { visible: false }\n        });\n\n        dragConstraintRef.current = constraint;\n        Matter.World.add(engineRef.current.world, constraint);\n\n        const onPointerMove = (moveEvent: PointerEvent) => {\n            if (dragConstraintRef.current) {\n                dragConstraintRef.current.pointA = { x: moveEvent.clientX, y: moveEvent.clientY };\n            }\n        };\n\n        const onPointerUp = () => {\n            if (engineRef.current && dragConstraintRef.current) {\n                Matter.World.remove(engineRef.current.world, dragConstraintRef.current);\n            }\n            dragConstraintRef.current = null;\n            window.removeEventListener('pointermove', onPointerMove);\n            window.removeEventListener('pointerup', onPointerUp);\n        };\n\n        window.addEventListener('pointermove', onPointerMove);\n        window.addEventListener('pointerup', onPointerUp);\n    }, []);\n\n    const sectionKeys: (keyof TankaSections)[] = ['kami1', 'kami2', 'kami3', 'shimo1', 'shimo2'];\n\n    return (\n        <div ref={containerRef} className=\"fixed inset-0 overflow-hidden touch-none\">\n            <div\n                ref={cardRef}\n                onPointerDown={handlePointerDown}\n                className=\"absolute left-0 top-0 cursor-grab active:cursor-grabbing p-16 bg-[#FFFCF9] rounded-sm border border-slate-200/60 select-none will-change-transform\"\n                style={{\n                    width: `${CARD_WIDTH}px`,\n                    height: `${CARD_HEIGHT}px`,\n                    opacity: isReady ? 1 : 0,\n                }}\n            >\n                <div className=\"flex flex-col items-center justify-center h-full gap-y-8 pointer-events-none mix-blend-multiply\">\n                    <div className=\"flex flex-wrap justify-center items-center content-center h-full max-w-lg gap-x-6 gap-y-4\">\n                        {sectionKeys.map((key) => (\n                            <span key={key} className=\"text-3xl md:text-4xl font-semibold tracking-tighter text-slate-800 whitespace-nowrap\" style={{ fontFeatureSettings: '\"palt\"' }}>\n                                {sections[key]}\n                            </span>\n                        ))}\n                    </div>\n                </div>\n                <div className=\"absolute inset-0 bg-slate-500 opacity-[0.03] pointer-events-none rounded-sm\" />\n            </div>\n\n            <motion.p\n                className=\"fixed bottom-12 left-0 right-0 text-center text-[10px] text-slate-300 font-light tracking-[0.2em] uppercase pointer-events-none\"\n                initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 1 }}\n            >\n                Throw away to forget\n            </motion.p>\n        </div>\n    );\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///Users/sugawara/Service/MISOHITO/misohito/src/components/editor/TankaEditor.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport * as Label from '@radix-ui/react-label';\nimport { useTankaEditor } from '@/hooks/useTankaEditor';\nimport { TankaSections } from '@/types/post';\nimport { PostAnimation } from '@/components/post/PostAnimation';\nimport { DraggablePost } from '@/components/post/DraggablePost'; // ← 追加\n\n// 状態の定義\ntype EditorStatus = 'editing' | 'animating' | 'viewing';\n\nexport const TankaEditor = () => {\n    const { sections, inputRefs, handleChange, LIMITS } = useTankaEditor();\n    const [status, setStatus] = useState<EditorStatus>('editing'); // 状態管理\n\n    const isComplete = Object.keys(LIMITS).every(\n        (key) => sections[key as keyof TankaSections].length === LIMITS[key as keyof TankaSections]\n    );\n\n    const handlePost = () => {\n        if (isComplete) {\n            setStatus('animating');\n        }\n    };\n\n    // アニメーション完了後の処理\n    const handleAnimationComplete = () => {\n        setStatus('viewing');\n    };\n\n    // 投げ捨てられた（削除された）時の処理\n    const handleDiscard = () => {\n        // 本当はここでデータをクリアする処理などを入れる\n        // 今回はデモとして入力状態に戻すだけ（文字は残したままにするか、消すか）\n        // 文字を消す場合は useTankaEditor に reset 関数を追加する必要がありますが、\n        // いったん「投げ捨てた快感」のあとに、また編集画面に戻る動きにします。\n        setStatus('editing');\n    };\n\n    // ■ 状態：アニメーション中\n    if (status === 'animating') {\n        return <PostAnimation sections={sections} onComplete={handleAnimationComplete} />;\n    }\n\n    // ■ 状態：鑑賞 & 物理演算モード\n    if (status === 'viewing') {\n        return <DraggablePost sections={sections} onDelete={handleDiscard} />;\n    }\n\n    // ■ 状態：入力中 (デフォルト)\n    return (\n        <div className=\"flex flex-col gap-12 p-6 w-full max-w-3xl mx-auto animate-in fade-in duration-500\">\n            <div className=\"flex flex-wrap gap-4 items-end justify-center\">\n                {(Object.keys(LIMITS) as Array<keyof TankaSections>).map((key) => (\n                    <div key={key} className=\"flex flex-col items-center gap-3\">\n                        <Label.Root className=\"text-[10px] text-slate-400 font-medium uppercase tracking-widest\">\n                            {LIMITS[key]}\n                        </Label.Root>\n                        <input\n                            ref={inputRefs[key]}\n                            id={key}\n                            type=\"text\"\n                            value={sections[key]}\n                            onChange={(e) => handleChange(e, key)}\n                            placeholder=\"・\"\n                            className={`\n                text-center text-2xl font-medium border-b transition-all outline-none bg-transparent\n                ${sections[key].length === LIMITS[key]\n                                    ? 'border-slate-800 text-slate-900'\n                                    : 'border-slate-200 text-slate-400 focus:border-slate-400'}\n              `}\n                            style={{ width: `${LIMITS[key] * 1.5 + 1}rem` }}\n                        />\n                    </div>\n                ))}\n            </div>\n\n            <div className=\"flex flex-col items-center gap-8\">\n                <div className=\"text-center\">\n                    <p className=\"text-xs text-slate-400 mb-4 font-light tracking-widest\">PREVIEW</p>\n                    <p className=\"text-lg tracking-wider text-slate-600 font-serif\">\n                        {Object.values(sections).filter(Boolean).join('　')}\n                    </p>\n                </div>\n\n                <button\n                    onClick={handlePost}\n                    disabled={!isComplete}\n                    className={`\n            px-8 py-3 rounded-full text-sm font-bold tracking-widest transition-all duration-500\n            ${isComplete\n                            ? 'bg-slate-900 text-white hover:bg-slate-700 translate-y-0 opacity-100 shadow-lg'\n                            : 'bg-slate-200 text-slate-400 translate-y-4 opacity-0 cursor-not-allowed'}\n          `}\n                >\n                    詠む\n                </button>\n            </div>\n        </div>\n    );\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA,qPAAiE,OAAO;AAPxE;;;;;;;AAYO,MAAM,cAAc;IACvB,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,MAAM,EAAE,GAAG,IAAA,gJAAc;IACpE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAe,YAAY,OAAO;IAEtE,MAAM,aAAa,OAAO,IAAI,CAAC,QAAQ,KAAK,CACxC,CAAC,MAAQ,QAAQ,CAAC,IAA2B,CAAC,MAAM,KAAK,MAAM,CAAC,IAA2B;IAG/F,MAAM,aAAa;QACf,IAAI,YAAY;YACZ,UAAU;QACd;IACJ;IAEA,gBAAgB;IAChB,MAAM,0BAA0B;QAC5B,UAAU;IACd;IAEA,qBAAqB;IACrB,MAAM,gBAAgB;QAClB,0BAA0B;QAC1B,sCAAsC;QACtC,mDAAmD;QACnD,qCAAqC;QACrC,UAAU;IACd;IAEA,gBAAgB;IAChB,IAAI,WAAW,aAAa;QACxB,qBAAO,8OAAC,4JAAa;YAAC,UAAU;YAAU,YAAY;;;;;;IAC1D;IAEA,oBAAoB;IACpB,IAAI,WAAW,WAAW;QACtB,qBAAO,8OAAC,4JAAa;YAAC,UAAU;YAAU,UAAU;;;;;;IACxD;IAEA,mBAAmB;IACnB,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACV,AAAC,OAAO,IAAI,CAAC,QAAuC,GAAG,CAAC,CAAC,oBACtD,8OAAC;wBAAc,WAAU;;0CACrB,8OAAC,yKAAU;gCAAC,WAAU;0CACjB,MAAM,CAAC,IAAI;;;;;;0CAEhB,8OAAC;gCACG,KAAK,SAAS,CAAC,IAAI;gCACnB,IAAI;gCACJ,MAAK;gCACL,OAAO,QAAQ,CAAC,IAAI;gCACpB,UAAU,CAAC,IAAM,aAAa,GAAG;gCACjC,aAAY;gCACZ,WAAW,CAAC;;gBAExB,EAAE,QAAQ,CAAC,IAAI,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,GAChB,oCACA,yDAAyD;cACjF,CAAC;gCACa,OAAO;oCAAE,OAAO,GAAG,MAAM,CAAC,IAAI,GAAG,MAAM,EAAE,GAAG,CAAC;gCAAC;;;;;;;uBAjB5C;;;;;;;;;;0BAuBlB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;0CAAyD;;;;;;0CACtE,8OAAC;gCAAE,WAAU;0CACR,OAAO,MAAM,CAAC,UAAU,MAAM,CAAC,SAAS,IAAI,CAAC;;;;;;;;;;;;kCAItD,8OAAC;wBACG,SAAS;wBACT,UAAU,CAAC;wBACX,WAAW,CAAC;;YAEpB,EAAE,aACgB,mFACA,yEAAyE;UAC7F,CAAC;kCACM;;;;;;;;;;;;;;;;;;AAMjB"}}]
}